import{_ as s,c as a,o as n,a as l}from"./app.e487291a.js";const F=JSON.parse('{"title":"你好 👋","description":"","frontmatter":{},"headers":[{"level":2,"title":"我们和 ChatGPT 的关系","slug":"我们和-chatgpt-的关系","link":"#我们和-chatgpt-的关系","children":[]},{"level":2,"title":"项目特性","slug":"项目特性","link":"#项目特性","children":[]},{"level":2,"title":"部署","slug":"部署","link":"#部署","children":[{"level":3,"title":"对设备的要求","slug":"对设备的要求","link":"#对设备的要求","children":[]},{"level":3,"title":"PM2","slug":"pm2","link":"#pm2","children":[]},{"level":3,"title":"Docker","slug":"docker","link":"#docker","children":[]}]},{"level":2,"title":"配置依赖","slug":"配置依赖","link":"#配置依赖","children":[{"level":3,"title":"配置数据库","slug":"配置数据库","link":"#配置数据库","children":[]},{"level":3,"title":"设置程序 Config/app.toml","slug":"设置程序-config-app-toml","link":"#设置程序-config-app-toml","children":[]},{"level":3,"title":"配置生成服务","slug":"配置生成服务","link":"#配置生成服务","children":[]},{"level":3,"title":"配置基础权限","slug":"配置基础权限","link":"#配置基础权限","children":[]}]}],"relativePath":"guide/getting-started.md","lastUpdated":1675393198000}'),p={name:"guide/getting-started.md"},o=l(`<h1 id="你好-👋" tabindex="-1">你好 👋 <a class="header-anchor" href="#你好-👋" aria-hidden="true">#</a></h1><p>Openai Bot 是基于 GPT 系列模型(主要为 Openai ) 的接口开发的系列套件。</p><p>通过部署本项目，你可以在 多种IM平台/Web 前端/实机 上与 GPT 模型交互。</p><p>如果你是开发者，你可以查看 <code>Dev Guide</code> 来熟悉我们的组件，开发其他的有用的应用。</p><h2 id="我们和-chatgpt-的关系" tabindex="-1">我们和 ChatGPT 的关系 <a class="header-anchor" href="#我们和-chatgpt-的关系" aria-hidden="true">#</a></h2><p>同级，ChatGPT 是基于模型的 Web 应用，如果你有 ChatGpt 模型的访问权限，理论可以做到一致。 我们使用自维护的 llm 框架 <code>llm-kira</code> 实现对话代理。</p><h2 id="项目特性" tabindex="-1">项目特性 <a class="header-anchor" href="#项目特性" aria-hidden="true">#</a></h2><ul><li>全程异步实现</li><li>支持速率限制</li><li>支持私聊，群聊</li><li>支持黑白名单系统</li><li>支持用量管理，人设，定制<code>词</code>风格</li><li>记忆池保证上下文记忆 1000 轮有效</li><li>多平台，泛用性强，还支持实机语音助手</li><li>多 Api key 轮询池，便捷管理，超额弹出</li><li>支持主动寻找内容进行回复，支持 Sticker 回复</li><li>多平台支持的通用接口，理论可以接入任何聊天平台</li><li>可拆卸内容安全模块，还支持官方的 Api 内容过滤</li><li>实时网络索引支持，通用的抓取器(支持UrlQueryHtml就能抓)</li><li>多模态交互支持，图片 <code>Blip</code> 理解支持，语音识别，贴纸支持</li></ul><h2 id="部署" tabindex="-1">部署 <a class="header-anchor" href="#部署" aria-hidden="true">#</a></h2><h3 id="对设备的要求" tabindex="-1">对设备的要求 <a class="header-anchor" href="#对设备的要求" aria-hidden="true">#</a></h3><p>此项目的机器</p><ul><li>最好有 10 GB 的磁盘空间</li><li>最好有 1 GB 的内存，如果需要启用图片理解，则需要 4GB</li><li>最好在国外落地</li><li>对 CPU 没有特殊要求。如果你需要启用 Vits 支持，则需要好一些的 CPU</li><li>不需要 GPU。如果需要加快图片理解，可以考虑使用哟~🤗</li></ul><h3 id="pm2" tabindex="-1">PM2 <a class="header-anchor" href="#pm2" aria-hidden="true">#</a></h3><p><strong>一键脚本</strong></p><ul><li>在根目录运行以下脚本自动 安装/更新 依赖和项目。</li></ul><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-LO</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://raw.githubusercontent.com/LLMKira/Openaibot/main/setup.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">sh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">setup.sh</span></span>
<span class="line"></span></code></pre></div><ul><li>安装 PM2 脚本管理器</li></ul><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">apt</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">npm</span></span>
<span class="line"></span></code></pre></div><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pm2@latest</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-g</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># or</span></span>
<span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">global</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pm2</span></span>
<span class="line"></span></code></pre></div><p>这时候，你就可以 <code>cd Openaibot</code>，然后使用 <code>pm2 start pm2.json</code> 启动本项目了。</p><p><strong>不过先等一下！</strong> 你还需要测试它并且配置数据库环境，否则pm2会无限重试重启让你的 CPU 满载。</p><p>幸运的是，配置项目的其他环境很简单，请看下面的配置说明。</p><h3 id="docker" tabindex="-1">Docker <a class="header-anchor" href="#docker" aria-hidden="true">#</a></h3><ul><li><a href="https://hub.docker.com/r/LLMKira/Openaibot" target="_blank" rel="noreferrer">Docker</a></li></ul><p>Docker 镜像在保证情况 stable 后才会发布更新。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">clone</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://github.com/LLMKira/Openaibot</span></span>
<span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Openaibot</span></span>
<span class="line"><span style="color:#FFCB6B;">vim</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Config/service.json</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 见下面</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">compose</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">up</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-d</span></span>
<span class="line"></span></code></pre></div><p>接着我们需要配置项目的配置文件和运行环境，请看下面的配置说明。</p><h2 id="配置依赖" tabindex="-1">配置依赖 <a class="header-anchor" href="#配置依赖" aria-hidden="true">#</a></h2><p>如果你没有使用一键脚本也没有使用 Docker，那么需要自己 <code>cd Openaibot</code> 在项目目录安装依赖。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pip</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-r</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">requirements.txt</span></span>
<span class="line"></span></code></pre></div><h3 id="配置数据库" tabindex="-1">配置数据库 <a class="header-anchor" href="#配置数据库" aria-hidden="true">#</a></h3><p><strong>本机</strong></p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">apt-get</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">redis</span></span>
<span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">redis.service</span></span>
<span class="line"></span></code></pre></div><p>默认设置就可以启动了，如果需要指定参数，你可以在 <code>Config/service.json</code> 中配置它</p><p><strong>Docker</strong></p><p>配置 <code>Config/service.json</code> ，需要将 <code>localhost</code> 改为 <code>redis</code> 具体配置方法请查看服务配置章节。</p><h3 id="设置程序-config-app-toml" tabindex="-1">设置程序 Config/app.toml <a class="header-anchor" href="#设置程序-config-app-toml" aria-hidden="true">#</a></h3><p>复制配置模板 <code>cp app_exp.toml app.toml</code></p><p>编辑配置 <code>vim app.toml</code><code>nano app.toml</code></p><p><strong>配置文件</strong></p><p>因为我们支持了多平台，所以可以同时启动多个代理会话端。</p><div class="language-toml"><button title="Copy Code" class="copy"></button><span class="lang">toml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 不想启动哪个，就注释掉那一部分</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># QQ 机器人</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#FFCB6B;">Controller</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">QQ</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">master </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">114</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">514</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># master user id , 管理者账号 ID</span></span>
<span class="line"><span style="color:#A6ACCD;">account </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#A6ACCD;">http_host </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">http://localhost:8080</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;"># Mirai http服务器</span></span>
<span class="line"><span style="color:#A6ACCD;">ws_host </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">http://localhost:8080</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;"># Mirai Websocket服务器</span></span>
<span class="line"><span style="color:#A6ACCD;">verify_key </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">trigger </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 合适的时候主动回复</span></span>
<span class="line"><span style="color:#A6ACCD;">INTRO </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">POWER BY OPENAI</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># 后缀</span></span>
<span class="line"><span style="color:#A6ACCD;">ABOUT </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Created by github.com/LLMKira/Openaibot</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 关于命令返回</span></span>
<span class="line"><span style="color:#A6ACCD;">WHITE </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Group NOT in WHITE list</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 黑白名单提示</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 设置的代理，但是不代理 openai api, 只代理 bot</span></span>
<span class="line"><span style="color:#A6ACCD;">proxy </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> status </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> url </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://127.0.0.1:7890</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Telegram 机器人</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#FFCB6B;">Controller</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">Telegram</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">master </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">114</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">514</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># master user id , 管理者账号 ID</span></span>
<span class="line"><span style="color:#A6ACCD;">botToken </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 机器人密钥</span></span>
<span class="line"><span style="color:#A6ACCD;">trigger </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 合适的时候主动回复</span></span>
<span class="line"><span style="color:#A6ACCD;">INTRO </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">POWER BY OPENAI</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># 后缀</span></span>
<span class="line"><span style="color:#A6ACCD;">ABOUT </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Created by github.com/LLMKira/Openaibot</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 关于命令返回</span></span>
<span class="line"><span style="color:#A6ACCD;">WHITE </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Group NOT in WHITE list</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 黑白名单提示</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 设置的代理，但是不代理 openai api, 只代理 bot</span></span>
<span class="line"><span style="color:#A6ACCD;">proxy </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> status </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> url </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://127.0.0.1:7890</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 基础对话事件服务器，Web支持或者音箱用</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#FFCB6B;">Controller</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">BaseServer</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">port </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">9559</span></span>
<span class="line"></span></code></pre></div><ul><li>配置 Telegram 设置</li></ul><p><a href="https://t.me/BotFather" target="_blank" rel="noreferrer">Telegram botToken 申请</a></p><p>然后关闭隐私模式或者提拔机器人为管理员后才能使用。</p><ul><li>配置 QQ 机器人</li></ul><p><a href="https://graiax.cn/before/install_mirai.html" target="_blank" rel="noreferrer">配置机器人后端</a></p><h4 id="命令注册" tabindex="-1">命令注册 <a class="header-anchor" href="#命令注册" aria-hidden="true">#</a></h4><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">chat</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">交谈</span></span>
<span class="line"><span style="color:#FFCB6B;">write</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">续写</span></span>
<span class="line"><span style="color:#FFCB6B;">forgetme</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">重置记忆</span></span>
<span class="line"><span style="color:#FFCB6B;">remind</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">场景设定</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">取消用短文本覆盖</span></span>
<span class="line"><span style="color:#FFCB6B;">voice</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">语音支持</span></span>
<span class="line"><span style="color:#FFCB6B;">trigger</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">管理员启动主动回复</span></span>
<span class="line"><span style="color:#FFCB6B;">style</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">设定偏好词</span></span>
<span class="line"><span style="color:#FFCB6B;">auto_adjust</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">自动优化器</span></span>
<span class="line"><span style="color:#FFCB6B;">set_user_cold</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">设置用户冷却时间</span></span>
<span class="line"><span style="color:#FFCB6B;">set_group_cold</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">设置群组冷却时间</span></span>
<span class="line"><span style="color:#FFCB6B;">set_token_limit</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">设置输出限制长度</span></span>
<span class="line"><span style="color:#FFCB6B;">set_input_limit</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">设置输入限制长度</span></span>
<span class="line"><span style="color:#FFCB6B;">see_api_key</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">现在几个</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Api</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">key</span></span>
<span class="line"><span style="color:#FFCB6B;">del_api_key</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">删除</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Api</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">key</span></span>
<span class="line"><span style="color:#FFCB6B;">add_api_key</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">增加</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Api</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">key</span></span>
<span class="line"><span style="color:#FFCB6B;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">获取/备份热配置文件</span></span>
<span class="line"><span style="color:#FFCB6B;">set_per_user_limit</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">设置普通用户额度</span></span>
<span class="line"><span style="color:#FFCB6B;">set_per_hour_limit</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">设置用户小时额度</span></span>
<span class="line"><span style="color:#FFCB6B;">promote_user_limit</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">提升用户额度</span></span>
<span class="line"><span style="color:#FFCB6B;">reset_user_usage</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">重置用户额度</span></span>
<span class="line"><span style="color:#FFCB6B;">add_block_group</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">禁止群组</span></span>
<span class="line"><span style="color:#FFCB6B;">del_block_group</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">解禁群组</span></span>
<span class="line"><span style="color:#FFCB6B;">add_block_user</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">禁止用户</span></span>
<span class="line"><span style="color:#FFCB6B;">del_block_user</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">解禁用户</span></span>
<span class="line"><span style="color:#FFCB6B;">add_white_group</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">加入白名单群组</span></span>
<span class="line"><span style="color:#FFCB6B;">add_white_user</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">加入白名单用户</span></span>
<span class="line"><span style="color:#FFCB6B;">del_white_group</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">除名白名单群</span></span>
<span class="line"><span style="color:#FFCB6B;">del_white_user</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">除名白名单人</span></span>
<span class="line"><span style="color:#FFCB6B;">update_detect</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">更新敏感词</span></span>
<span class="line"><span style="color:#FFCB6B;">open_user_white_mode</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">开用户白名单</span></span>
<span class="line"><span style="color:#FFCB6B;">open_group_white_mode</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">开群组白名单</span></span>
<span class="line"><span style="color:#FFCB6B;">close_user_white_mode</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">关用户白名单</span></span>
<span class="line"><span style="color:#FFCB6B;">close_group_white_mode</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">关群组白名单</span></span>
<span class="line"><span style="color:#FFCB6B;">open</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">开启机器人</span></span>
<span class="line"><span style="color:#FFCB6B;">close</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">关闭机器人</span></span>
<span class="line"><span style="color:#FFCB6B;">change_head</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">设定人设开关</span></span>
<span class="line"><span style="color:#FFCB6B;">change_style</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">设定风格开关</span></span>
<span class="line"><span style="color:#FFCB6B;">help</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">帮助</span></span>
<span class="line"></span></code></pre></div><p>上面的列表可以直接在 Telegram BotFather 中配置为命令列表。</p><p>其他平台不支持注册的平台只要记住就好。</p><h3 id="配置生成服务" tabindex="-1">配置生成服务 <a class="header-anchor" href="#配置生成服务" aria-hidden="true">#</a></h3><p>你既然在 <code>Config/app.toml</code> 配置了 Master 为你，那么你就可以使用以下命令配置程序内容。</p><h4 id="openai-密钥" tabindex="-1">Openai 密钥 <a class="header-anchor" href="#openai-密钥" aria-hidden="true">#</a></h4><p>Api Key存储在 <code>Config/api_keys.json</code> 下面，你可以直接使用 <code>/add_api_key</code> 添加密钥。</p><p>强烈建议在机器人私聊中配置 key</p><div class="language-markdown"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">see_api_key - 现在几个 Api key</span></span>
<span class="line"><span style="color:#A6ACCD;">del_api_key - 删除 Api key</span></span>
<span class="line"><span style="color:#A6ACCD;">add_api_key - 增加 Api key</span></span>
<span class="line"></span></code></pre></div><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">OPENAI_API_KEY</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">sk-***********</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">sk-***********</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p><a href="https://beta.openai.com/account/api-keys" target="_blank" rel="noreferrer">OPENAI_API_KEY 申请</a>，支持多 key 分发负载。 <a href="https://openai.com/api/pricing/" target="_blank" rel="noreferrer">定价参考</a>。</p><h3 id="配置基础权限" tabindex="-1">配置基础权限 <a class="header-anchor" href="#配置基础权限" aria-hidden="true">#</a></h3><p>默认情况下，程序是不允许任何人对话的，处于白名单模式。</p><p>聊天和名单相关配置在 <code>Config/config.json</code> 中，你可以使用 <code>/config</code> 来查看/备份此文件。</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 相关命令</span></span>
<span class="line"><span style="color:#FFCB6B;">add_block_group</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">禁止群组</span></span>
<span class="line"><span style="color:#FFCB6B;">del_block_group</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">解禁群组</span></span>
<span class="line"><span style="color:#FFCB6B;">add_block_user</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">禁止用户</span></span>
<span class="line"><span style="color:#FFCB6B;">del_block_user</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">解禁用户</span></span>
<span class="line"><span style="color:#FFCB6B;">add_white_group</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">加入白名单群组</span></span>
<span class="line"><span style="color:#FFCB6B;">add_white_user</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">加入白名单用户</span></span>
<span class="line"><span style="color:#FFCB6B;">del_white_group</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">除名白名单群</span></span>
<span class="line"><span style="color:#FFCB6B;">del_white_user</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">除名白名单人</span></span>
<span class="line"><span style="color:#FFCB6B;">open_user_white_mode</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">开用户白名单</span></span>
<span class="line"><span style="color:#FFCB6B;">open_group_white_mode</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">开群组白名单</span></span>
<span class="line"><span style="color:#FFCB6B;">close_user_white_mode</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">关用户白名单</span></span>
<span class="line"><span style="color:#FFCB6B;">close_group_white_mode</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">关群组白名单</span></span>
<span class="line"></span></code></pre></div><p>为了防止不同平台同ID的情况，在命令中任何 ID 后面都应该加 相应平台的后缀。具体使用还请查看 <code>使用</code> 一节。</p><h4 id="controller-平台后缀" tabindex="-1">Controller 平台后缀 <a class="header-anchor" href="#controller-平台后缀" aria-hidden="true">#</a></h4><table><thead><tr><th>Controller</th><th>suffix_id</th><th>desc</th></tr></thead><tbody><tr><td>QQ</td><td>101</td><td></td></tr><tr><td>Telegram</td><td>100</td><td></td></tr><tr><td>Api</td><td>103</td><td></td></tr></tbody></table>`,66),e=[o];function t(c,r,C,y,i,D){return n(),a("div",null,e)}const d=s(p,[["render",t]]);export{F as __pageData,d as default};
