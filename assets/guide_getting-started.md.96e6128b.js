import{_ as s,o as a,c as n,Q as l}from"./chunks/framework.b81f03d3.js";const F=JSON.parse('{"title":"📝 部署指南","description":"","frontmatter":{},"headers":[],"relativePath":"guide/getting-started.md","filePath":"guide/getting-started.md","lastUpdated":1699808453000}'),p={name:"guide/getting-started.md"},o=l(`<h1 id="📝-部署指南" tabindex="-1">📝 部署指南 <a class="header-anchor" href="#📝-部署指南" aria-label="Permalink to &quot;📝 部署指南&quot;">​</a></h1><h2 id="📦-检查系统" tabindex="-1">📦 检查系统 <a class="header-anchor" href="#📦-检查系统" aria-label="Permalink to &quot;📦 检查系统&quot;">​</a></h2><p>请确认您的系统语言集为 UTF8，否则输入 <code>dpkg-reconfigure locales</code> 配置语言。</p><p>请确认您服务器的内存大于 <code>1G</code>。</p><div class="tip custom-block"><p class="custom-block-title">提示</p><p>基础运行负载为，每个接收器+发送器(一个平台)约为 600MB 内存。 接收器和发送器可以分开部署，但是数据库必须共享。</p></div><h2 id="📦-快速开始" tabindex="-1">📦 快速开始 <a class="header-anchor" href="#📦-快速开始" aria-label="Permalink to &quot;📦 快速开始&quot;">​</a></h2><p>阅读 <a href="https://llmkira.github.io/Docs/" target="_blank" rel="noreferrer">🧀 部署文档</a> 获得更多信息。</p><div class="warning custom-block"><p class="custom-block-title">重要</p><p>请提前用 <code>python3 start_sender.py</code> <code>python3 start_receiver.py</code> 测试是否能正常运行。</p><p>Docker 用户可以使用 <code>docker-compose up -f docker-compose.yml</code> 前台预测试。</p><p>运行 <code>python3 start_tutorial.py</code> 观看教程。</p></div><h3 id="🥣-docker" tabindex="-1">🥣 Docker <a class="header-anchor" href="#🥣-docker" aria-label="Permalink to &quot;🥣 Docker&quot;">​</a></h3><p>Build Hub: <a href="https://hub.docker.com/repository/docker/sudoskys/llmbot/general" target="_blank" rel="noreferrer">sudoskys/llmbot</a></p><h4 id="自动-docker-docker-compose-安装运行" tabindex="-1">自动 Docker/Docker-compose 安装运行 <a class="header-anchor" href="#自动-docker-docker-compose-安装运行" aria-label="Permalink to &quot;自动 Docker/Docker-compose 安装运行&quot;">​</a></h4><p>如果你在使用一台崭新的服务器，你可以使用下面的Shell来尝试自动安装本项目。</p><p>此脚本会自动使用 Docker 方法安装所需服务并映射端口，如果您已经部署了 <code>redis</code> ，<code>rabbitmq</code> ，<code>mongodb</code> 。</p><p>请自行修改 <code>docker-compose.yml</code> 文件。</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"></span>
<span class="line"><span style="color:#B392F0;">curl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-sSL</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://raw.githubusercontent.com/LLMKira/Openaibot/main/deploy.sh</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">bash</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"></span>
<span class="line"><span style="color:#6F42C1;">curl</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-sSL</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://raw.githubusercontent.com/LLMKira/Openaibot/main/deploy.sh</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">bash</span></span></code></pre></div><h4 id="手动-docker-compose安装" tabindex="-1">手动 Docker-compose安装 <a class="header-anchor" href="#手动-docker-compose安装" aria-label="Permalink to &quot;手动 Docker-compose安装&quot;">​</a></h4><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">git</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">clone</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://github.com/LlmKira/Openaibot.git</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Openaibot</span></span>
<span class="line"><span style="color:#B392F0;">cp</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">.env.exp</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">.env</span><span style="color:#E1E4E8;">&amp;&amp;</span><span style="color:#B392F0;">nano</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">.env</span></span>
<span class="line"><span style="color:#B392F0;">docker-compose</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker-compose.yml</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">up</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">git</span><span style="color:#24292E;"> </span><span style="color:#032F62;">clone</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://github.com/LlmKira/Openaibot.git</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Openaibot</span></span>
<span class="line"><span style="color:#6F42C1;">cp</span><span style="color:#24292E;"> </span><span style="color:#032F62;">.env.exp</span><span style="color:#24292E;"> </span><span style="color:#032F62;">.env</span><span style="color:#24292E;">&amp;&amp;</span><span style="color:#6F42C1;">nano</span><span style="color:#24292E;"> </span><span style="color:#032F62;">.env</span></span>
<span class="line"><span style="color:#6F42C1;">docker-compose</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker-compose.yml</span><span style="color:#24292E;"> </span><span style="color:#032F62;">up</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-d</span></span></code></pre></div><h3 id="🍔-shell" tabindex="-1">🍔 Shell <a class="header-anchor" href="#🍔-shell" aria-label="Permalink to &quot;🍔 Shell&quot;">​</a></h3><p>人工使用 pm2 启动</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">git</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">clone</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://github.com/LlmKira/Openaibot.git</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Openaibot</span></span>
<span class="line"><span style="color:#B392F0;">pip</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">poetry</span></span>
<span class="line"><span style="color:#B392F0;">poetry</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"><span style="color:#B392F0;">cp</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">.env.exp</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">.env</span><span style="color:#E1E4E8;"> &amp;&amp; </span><span style="color:#B392F0;">nano</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">.env</span></span>
<span class="line"><span style="color:#B392F0;">apt</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-y</span><span style="color:#E1E4E8;"> &amp;&amp; </span><span style="color:#B392F0;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pm2</span><span style="color:#E1E4E8;"> &amp;&amp; </span><span style="color:#B392F0;">pm2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">start</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pm2.json</span></span>
<span class="line"><span style="color:#B392F0;">pm2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">monit</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">git</span><span style="color:#24292E;"> </span><span style="color:#032F62;">clone</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://github.com/LlmKira/Openaibot.git</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Openaibot</span></span>
<span class="line"><span style="color:#6F42C1;">pip</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#032F62;">poetry</span></span>
<span class="line"><span style="color:#6F42C1;">poetry</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"><span style="color:#6F42C1;">cp</span><span style="color:#24292E;"> </span><span style="color:#032F62;">.env.exp</span><span style="color:#24292E;"> </span><span style="color:#032F62;">.env</span><span style="color:#24292E;"> &amp;&amp; </span><span style="color:#6F42C1;">nano</span><span style="color:#24292E;"> </span><span style="color:#032F62;">.env</span></span>
<span class="line"><span style="color:#6F42C1;">apt</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#032F62;">npm</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-y</span><span style="color:#24292E;"> &amp;&amp; </span><span style="color:#6F42C1;">npm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pm2</span><span style="color:#24292E;"> &amp;&amp; </span><span style="color:#6F42C1;">pm2</span><span style="color:#24292E;"> </span><span style="color:#032F62;">start</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pm2.json</span></span>
<span class="line"><span style="color:#6F42C1;">pm2</span><span style="color:#24292E;"> </span><span style="color:#032F62;">monit</span></span></code></pre></div><p>重启程序使用 <code>pm2 restart pm2.json</code> 。</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>推荐您使用 Docker Compose 进行部署。或者使用 Docker 运行数据库，pm2 运行机器人。</p><p>Docker 镜像使用 pm2-runtime 运行机器人，和您使用 shell 是一样的。</p></div><h2 id="🥽-手动安装" tabindex="-1">🥽 手动安装 <a class="header-anchor" href="#🥽-手动安装" aria-label="Permalink to &quot;🥽 手动安装&quot;">​</a></h2><ul><li><p>使用 <code>pip uninstall llm-kira</code> 卸载旧内核。(如果有)</p></li><li><p>使用 <code>pip uninstall llmkira</code> 卸载插件开发工具。(否则会造成冲突)</p></li><li><p>确认您的 Python 版本为 3.9 或以上。</p></li><li><p>安装 Docker</p></li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>安装 Docker 可以参考 <a href="https://docs.docker.com/engine/install/ubuntu/" target="_blank" rel="noreferrer">官方文档</a></p><p>安装 Docker Compose 可以参考 <a href="https://docs.docker.com/compose/install/" target="_blank" rel="noreferrer">官方文档</a></p><p>或者 <a href="https://krau.top/posts/install-docker-one-key" target="_blank" rel="noreferrer">博客文章</a></p><p>Windows 用户可以安装 <a href="https://www.docker.com/products/docker-desktop/" target="_blank" rel="noreferrer">Docker Desktop</a></p><p><strong>请确保您的数据库在一个网桥/局域网内，否则会链接失败。</strong></p></div><p>此时您可以尝试使用 <a href="#🥣-docker">Docker 运行机器人</a>，如果您不想使用 Docker，您可以继续阅读。</p><h3 id="🍫-安装缓存数据库" tabindex="-1">🍫 安装缓存数据库 <a class="header-anchor" href="#🍫-安装缓存数据库" aria-label="Permalink to &quot;🍫 安装缓存数据库&quot;">​</a></h3><p>提供两种方式安装缓存数据库，您可以选择其中一种。</p><h4 id="通过命令行安装" tabindex="-1">通过命令行安装 <a class="header-anchor" href="#通过命令行安装" aria-label="Permalink to &quot;通过命令行安装&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 安装 Redis</span></span>
<span class="line"><span style="color:#B392F0;">apt-get</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">redis</span></span>
<span class="line"><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">enable</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">redis.service</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--now</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 安装 Redis</span></span>
<span class="line"><span style="color:#6F42C1;">apt-get</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#032F62;">redis</span></span>
<span class="line"><span style="color:#6F42C1;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">enable</span><span style="color:#24292E;"> </span><span style="color:#032F62;">redis.service</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--now</span></span></code></pre></div><h4 id="通过-docker-安装" tabindex="-1">通过 Docker 安装 <a class="header-anchor" href="#通过-docker-安装" aria-label="Permalink to &quot;通过 Docker 安装&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">redis:latest</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">run</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">6379</span><span style="color:#9ECBFF;">:6379</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">--name</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">redis</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">redis:latest</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span><span style="color:#24292E;"> </span><span style="color:#032F62;">redis:latest</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">run</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-d</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">6379</span><span style="color:#032F62;">:6379</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">--name</span><span style="color:#24292E;"> </span><span style="color:#032F62;">redis</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">redis:latest</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">提示</p><p>推荐您添加密码防止数据库暴露在公网。</p></div><h3 id="🥕-安装-mongodb" tabindex="-1">🥕 安装 MongoDB <a class="header-anchor" href="#🥕-安装-mongodb" aria-label="Permalink to &quot;🥕 安装 MongoDB&quot;">​</a></h3><h4 id="通过命令行安装-1" tabindex="-1">通过命令行安装 <a class="header-anchor" href="#通过命令行安装-1" aria-label="Permalink to &quot;通过命令行安装&quot;">​</a></h4><p>请参考文章安装 MongoDB</p><p><a href="https://www.runoob.com/mongodb/mongodb-linux-install.html" target="_blank" rel="noreferrer">https://www.runoob.com/mongodb/mongodb-linux-install.html</a></p><p><a href="https://www.mongodb.com/try/download/community" target="_blank" rel="noreferrer">https://www.mongodb.com/try/download/community</a></p><p><a href="https://www.prisma.io/dataguide/mongodb/setting-up-a-local-mongodb-database" target="_blank" rel="noreferrer">https://www.prisma.io/dataguide/mongodb/setting-up-a-local-mongodb-database</a></p><div class="tip custom-block"><p class="custom-block-title">提示</p><p>推荐您添加密码防止数据库暴露在公网。 项目默认配置为 <code>mongodb://admin:8a8a8a@localhost:27017/</code> ，您可以在 .env 自行配置。</p><p>如果你通过 shell 安装 Mongodb ，请使用 <code>mongosh</code> 命令进入数据库创建用户和查询DSN。</p></div><h4 id="通过-docker-安装-1" tabindex="-1">通过 Docker 安装 <a class="header-anchor" href="#通过-docker-安装-1" aria-label="Permalink to &quot;通过 Docker 安装&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mongo:latest</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">run</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">27017</span><span style="color:#9ECBFF;">:27017</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">--name</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mongo</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">-e</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">MONGO_INITDB_ROOT_USERNAME=&quot;admin&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">-e</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">MONGO_INITDB_ROOT_PASSWORD=&quot;8a8a8a&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">mongo:latest</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span><span style="color:#24292E;"> </span><span style="color:#032F62;">mongo:latest</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">run</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-d</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">27017</span><span style="color:#032F62;">:27017</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">--name</span><span style="color:#24292E;"> </span><span style="color:#032F62;">mongo</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">-e</span><span style="color:#24292E;"> </span><span style="color:#032F62;">MONGO_INITDB_ROOT_USERNAME=&quot;admin&quot;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">-e</span><span style="color:#24292E;"> </span><span style="color:#032F62;">MONGO_INITDB_ROOT_PASSWORD=&quot;8a8a8a&quot;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">mongo:latest</span></span></code></pre></div><h3 id="🐰-安装消息队列" tabindex="-1">🐰 安装消息队列 <a class="header-anchor" href="#🐰-安装消息队列" aria-label="Permalink to &quot;🐰 安装消息队列&quot;">​</a></h3><p>提供两种方式安装缓存数据库，您可以选择其中一种。</p><h4 id="通过命令行安装-2" tabindex="-1">通过命令行安装 <a class="header-anchor" href="#通过命令行安装-2" aria-label="Permalink to &quot;通过命令行安装&quot;">​</a></h4><p>命令行安装 RabbitMQ 请参考 <a href="https://www.rabbitmq.com/install-debian.html" target="_blank" rel="noreferrer">官方文档</a> 或 <a href="https://www.leeks.info/zh_CN/latest/Linux_Notes/rabbitmq/RabbitMQ.html" target="_blank" rel="noreferrer">博客文章</a></p><h4 id="通过-docker-安装-2" tabindex="-1">通过 Docker 安装 <a class="header-anchor" href="#通过-docker-安装-2" aria-label="Permalink to &quot;通过 Docker 安装&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 安装 RabbitMQ</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rabbitmq:3.10-management</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">run</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5672</span><span style="color:#9ECBFF;">:5672</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">15672</span><span style="color:#9ECBFF;">:15672</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">-e</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">RABBITMQ_DEFAULT_USER=admin</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">-e</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">RABBITMQ_DEFAULT_PASS=</span><span style="color:#79B8FF;">8</span><span style="color:#9ECBFF;">a8a8a</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">--hostname</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">myRabbit</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">--name</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rabbitmq</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">rabbitmq:3.10-management</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ps</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-l</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 安装 RabbitMQ</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rabbitmq:3.10-management</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">run</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-d</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">5672</span><span style="color:#032F62;">:5672</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">15672</span><span style="color:#032F62;">:15672</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">-e</span><span style="color:#24292E;"> </span><span style="color:#032F62;">RABBITMQ_DEFAULT_USER=admin</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">-e</span><span style="color:#24292E;"> </span><span style="color:#032F62;">RABBITMQ_DEFAULT_PASS=</span><span style="color:#005CC5;">8</span><span style="color:#032F62;">a8a8a</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">--hostname</span><span style="color:#24292E;"> </span><span style="color:#032F62;">myRabbit</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">--name</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rabbitmq</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">rabbitmq:3.10-management</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ps</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-l</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">提示</p><p><code>RABBITMQ_DEFAULT_USER</code> 和 <code>RABBITMQ_DEFAULT_PASS</code> 为 RabbitMQ 的默认用户名和密码，您可以自行修改。 推荐您修改防止数据库暴露在公网。</p></div><h3 id="🛠-克隆项目" tabindex="-1">🛠 克隆项目 <a class="header-anchor" href="#🛠-克隆项目" aria-label="Permalink to &quot;🛠 克隆项目&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">git</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">clone</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://github.com/LlmKira/Openaibot.git</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Openaibot</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">git</span><span style="color:#24292E;"> </span><span style="color:#032F62;">clone</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://github.com/LlmKira/Openaibot.git</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Openaibot</span></span></code></pre></div><ul><li>配置 <code>.env</code> 文件</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">cp</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">.env.exp</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">.env</span></span>
<span class="line"><span style="color:#B392F0;">nano</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">.env</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">cp</span><span style="color:#24292E;"> </span><span style="color:#032F62;">.env.exp</span><span style="color:#24292E;"> </span><span style="color:#032F62;">.env</span></span>
<span class="line"><span style="color:#6F42C1;">nano</span><span style="color:#24292E;"> </span><span style="color:#032F62;">.env</span></span></code></pre></div><ul><li>⚙️ 安装依赖</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">pip</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-r</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">requirements.txt</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">pip</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-r</span><span style="color:#24292E;"> </span><span style="color:#032F62;">requirements.txt</span></span></code></pre></div><h2 id="▶️-运行" tabindex="-1">▶️ 运行 <a class="header-anchor" href="#▶️-运行" aria-label="Permalink to &quot;▶️ 运行&quot;">​</a></h2><p>推荐使用 PM2 面板运行机器人主体。</p><h3 id="pm2-托管" tabindex="-1">PM2 托管 <a class="header-anchor" href="#pm2-托管" aria-label="Permalink to &quot;PM2 托管&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">apt</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">npm</span></span>
<span class="line"><span style="color:#B392F0;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pm2</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-g</span></span>
<span class="line"><span style="color:#B392F0;">pm2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">start</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pm2.json</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">apt</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#032F62;">npm</span></span>
<span class="line"><span style="color:#6F42C1;">npm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pm2</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-g</span></span>
<span class="line"><span style="color:#6F42C1;">pm2</span><span style="color:#24292E;"> </span><span style="color:#032F62;">start</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pm2.json</span></span></code></pre></div><p>其他命令</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">pm2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">stop</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pm2.json</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 停止</span></span>
<span class="line"><span style="color:#B392F0;">pm2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">restart</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pm2.json</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 重启</span></span>
<span class="line"><span style="color:#B392F0;">pm2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pm2.json</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 查看状态</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">pm2</span><span style="color:#24292E;"> </span><span style="color:#032F62;">stop</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pm2.json</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># 停止</span></span>
<span class="line"><span style="color:#6F42C1;">pm2</span><span style="color:#24292E;"> </span><span style="color:#032F62;">restart</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pm2.json</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># 重启</span></span>
<span class="line"><span style="color:#6F42C1;">pm2</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pm2.json</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># 查看状态</span></span></code></pre></div><h3 id="shell-运行" tabindex="-1">Shell 运行 <a class="header-anchor" href="#shell-运行" aria-label="Permalink to &quot;Shell 运行&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">python3</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">start_sender.py</span></span>
<span class="line"><span style="color:#B392F0;">python3</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">start_receiver.py</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">python3</span><span style="color:#24292E;"> </span><span style="color:#032F62;">start_sender.py</span></span>
<span class="line"><span style="color:#6F42C1;">python3</span><span style="color:#24292E;"> </span><span style="color:#032F62;">start_receiver.py</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">提示</p><p>当您退出当前 Shell 时，机器人也会退出。您可以使用 <code>nohup</code> 命令来挂起机器人。不过我们不推荐这样做。</p></div><h2 id="🫙-运行配置" tabindex="-1">🫙 运行配置 <a class="header-anchor" href="#🫙-运行配置" aria-label="Permalink to &quot;🫙 运行配置&quot;">​</a></h2><p>配置相应的环境变量即可运行对应的机器人。</p><h3 id="🥽-运行时环境变量" tabindex="-1">🥽 运行时环境变量 <a class="header-anchor" href="#🥽-运行时环境变量" aria-label="Permalink to &quot;🥽 运行时环境变量&quot;">​</a></h3><p>| 变量名 | 值| 描述 | |--------------------------------|------------------------------------|-- -------------------------------------------------- ----------| | <code>LLMBOT_STOP_REPLY</code> | 1 | 如果值为 1，则停止接收回复 | | <code>LLMBOT_LOG_OUTPUT</code> | 调试| 如果值为 DEBUG，则将长调试日志打印到屏幕上。 | | <code>SERVICE_PROVIDER</code> | <code>public</code>,<code>private</code>...... | <code>llmkira/middleware/service_provider</code> 中的身份验证组件 |</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>修改 <code>SERVICE_PROVIDER</code> 变量以更改身份验证方法。</p><p>在 <code>settings.toml</code> 文件中配置服务提供商限制/白名单。</p><p>默认值为<code>public</code>，意为机器人向公众开放。</p></div><h3 id="🥛-telegram" tabindex="-1">🥛 Telegram <a class="header-anchor" href="#🥛-telegram" aria-label="Permalink to &quot;🥛 Telegram&quot;">​</a></h3><div class="language-ini vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">TELEGRAM_BOT_TOKEN</span><span style="color:#E1E4E8;"> = 1234567890:ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890</span></span>
<span class="line"><span style="color:#F97583;">TELEGRAM_BOT_PROXY_ADDRESS</span><span style="color:#E1E4E8;"> = socks5://127.0.0.1:7890</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">TELEGRAM_BOT_TOKEN</span><span style="color:#24292E;"> = 1234567890:ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890</span></span>
<span class="line"><span style="color:#D73A49;">TELEGRAM_BOT_PROXY_ADDRESS</span><span style="color:#24292E;"> = socks5://127.0.0.1:7890</span></span></code></pre></div><table><thead><tr><th>变量名称</th><th>说明</th><th>获取</th></tr></thead><tbody><tr><td><code>TELEGRAM_BOT_TOKEN</code></td><td>TelegramBot</td><td><a href="https://t.me/BotFather" target="_blank" rel="noreferrer">Telegram Bot</a></td></tr><tr><td><code>TELEGRAM_BOT_PROXY_ADDRESS</code></td><td>Aiohttp</td><td></td></tr></tbody></table><h3 id="🍖-discord" tabindex="-1">🍖 Discord <a class="header-anchor" href="#🍖-discord" aria-label="Permalink to &quot;🍖 Discord&quot;">​</a></h3><div class="language-ini vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">DISCORD_BOT_TOKEN</span><span style="color:#E1E4E8;"> = Y0NzY0NzY0NzY0NzY0NzY0.DsYQDQ.0</span></span>
<span class="line"><span style="color:#F97583;">DISCORD_BOT_PREFIX</span><span style="color:#E1E4E8;"> = !</span></span>
<span class="line"><span style="color:#F97583;">DISCORD_BOT_PROXY_ADDRESS</span><span style="color:#E1E4E8;"> = socks5://</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">DISCORD_BOT_TOKEN</span><span style="color:#24292E;"> = Y0NzY0NzY0NzY0NzY0NzY0.DsYQDQ.0</span></span>
<span class="line"><span style="color:#D73A49;">DISCORD_BOT_PREFIX</span><span style="color:#24292E;"> = !</span></span>
<span class="line"><span style="color:#D73A49;">DISCORD_BOT_PROXY_ADDRESS</span><span style="color:#24292E;"> = socks5://</span></span></code></pre></div><p>申请 Discord Bot 请移步 <a href="https://discord.com/developers/applications" target="_blank" rel="noreferrer">官方平台</a></p><p>点开 <code>oauth2/url-generator</code>，选中权限组 <code>bot</code> 您需要勾选的权限如下：</p><div class="language-ini vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">\`Send Messages\`</span></span>
<span class="line"><span style="color:#E1E4E8;">\`Read Message History\`</span></span>
<span class="line"><span style="color:#E1E4E8;">\`Send Messages in Theads\`</span></span>
<span class="line"><span style="color:#E1E4E8;">\`Attach Files\`</span></span>
<span class="line"><span style="color:#E1E4E8;">\`Mentions Everyone\`</span></span>
<span class="line"><span style="color:#E1E4E8;">\`Use Slash Command\`</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">\`Send Messages\`</span></span>
<span class="line"><span style="color:#24292E;">\`Read Message History\`</span></span>
<span class="line"><span style="color:#24292E;">\`Send Messages in Theads\`</span></span>
<span class="line"><span style="color:#24292E;">\`Attach Files\`</span></span>
<span class="line"><span style="color:#24292E;">\`Mentions Everyone\`</span></span>
<span class="line"><span style="color:#24292E;">\`Use Slash Command\`</span></span></code></pre></div><p>生成，复制链接到浏览器打开，选择您要添加机器人的服务器，然后点击 <code>授权</code>。</p><h4 id="特权意象" tabindex="-1">特权意象 <a class="header-anchor" href="#特权意象" aria-label="Permalink to &quot;特权意象&quot;">​</a></h4><p>打开 Bot 选项卡，打开 <code>Message Content Intent</code></p><p>参加 100 个服务器以上的机器人需要批准，否则不需要。</p><div class="language-ini vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">my_intents</span><span style="color:#E1E4E8;"> = (</span></span>
<span class="line"><span style="color:#E1E4E8;">             Intents.GUILDS |</span></span>
<span class="line"><span style="color:#E1E4E8;">             Intents.GUILD_MESSAGES |</span></span>
<span class="line"><span style="color:#E1E4E8;">             Intents.DM_MESSAGES |</span></span>
<span class="line"><span style="color:#E1E4E8;">             Intents.MESSAGE_CONTENT</span></span>
<span class="line"><span style="color:#E1E4E8;">             )</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">my_intents</span><span style="color:#24292E;"> = (</span></span>
<span class="line"><span style="color:#24292E;">             Intents.GUILDS |</span></span>
<span class="line"><span style="color:#24292E;">             Intents.GUILD_MESSAGES |</span></span>
<span class="line"><span style="color:#24292E;">             Intents.DM_MESSAGES |</span></span>
<span class="line"><span style="color:#24292E;">             Intents.MESSAGE_CONTENT</span></span>
<span class="line"><span style="color:#24292E;">             )</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">提示</p><p>一旦您的机器人达到 100 台或更多服务器，就需要验证和批准。 <a href="https://support.discord.com/hc/en-us/articles/360040720412" target="_blank" rel="noreferrer">Notice</a></p></div><h3 id="🍗-slack" tabindex="-1">🍗 Slack <a class="header-anchor" href="#🍗-slack" aria-label="Permalink to &quot;🍗 Slack&quot;">​</a></h3><p>Slack 平台需要您自行创建应用，然后添加到您的工作区。</p><div class="language-ini vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">SLACK_APP_TOKEN</span><span style="color:#E1E4E8;"> = xapp</span></span>
<span class="line"><span style="color:#F97583;">SLACK_BOT_TOKEN</span><span style="color:#E1E4E8;"> = xoxb</span></span>
<span class="line"><span style="color:#F97583;">SLACK_SIGNING_SECRET</span><span style="color:#E1E4E8;"> = xxxxxxx</span></span>
<span class="line"><span style="color:#F97583;">SLACK_BOT_PROXY_ADDRESS</span><span style="color:#E1E4E8;"> = http</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">SLACK_APP_TOKEN</span><span style="color:#24292E;"> = xapp</span></span>
<span class="line"><span style="color:#D73A49;">SLACK_BOT_TOKEN</span><span style="color:#24292E;"> = xoxb</span></span>
<span class="line"><span style="color:#D73A49;">SLACK_SIGNING_SECRET</span><span style="color:#24292E;"> = xxxxxxx</span></span>
<span class="line"><span style="color:#D73A49;">SLACK_BOT_PROXY_ADDRESS</span><span style="color:#24292E;"> = http</span></span></code></pre></div><p>打开 <a href="https://api.slack.com/apps/" target="_blank" rel="noreferrer">Slack App Center</a>，创建一个新的应用程序。</p><ul><li>配置密钥</li></ul><p>在主页上找到 <code>Signing Secret</code> 选项卡，寻找 <code>SLACK_SIGNING_SECRET</code>。</p><p>找到 <code>App-Level Tokens</code> 选项卡，寻找 <code>SLACK_APP_TOKEN</code>。</p><p>打开 Oauth 选项卡，找到 <code>Bot User OAuth Token</code>，将其作为 <code>SLACK_BOT_TOKEN</code>。</p><ul><li>启用套接字模式</li></ul><p>开启 <code>Socket Mode</code></p><ul><li>开启事件订阅</li></ul><p>前往 event-subscriptions ,在页面上启用 <code>Event Subscriptions</code> ，订阅以下事件：<code>message.channels</code>、<code>message.im</code>、<code>message.groups</code>。</p><ul><li>开启读写权限</li></ul><p>前往 oauth ，找到 <code>Bot Token Scopes</code> ，并选择以下权限：<code>chat:write</code>、<code>channels:read</code>、<code>commands</code>、<code>files:read</code>、<code>files:write</code>、<code>im:read</code>、<code>im:history</code>、<code>group:history</code>、<code>im:write</code>、<code>channel:write</code>、<code>channel:history</code> （可能会有额外的一些权限）。</p><ul><li>注册所有 Slash 命令</li></ul><p>前往 Slash Commands ，注册所有 Slash 命令。命令表见 <a href="/Docs/guide/command">命令指南</a>。</p><p>重新安装 APP，并将您的机器人邀请到频道中,使用 <code>@BOT</code> 调用您的机器人.</p><h3 id="🍔-kook" tabindex="-1">🍔 Kook <a class="header-anchor" href="#🍔-kook" aria-label="Permalink to &quot;🍔 Kook&quot;">​</a></h3><div class="language-ini vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">KOOK_BOT_TOKEN</span><span style="color:#E1E4E8;"> = 1234567890:ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">KOOK_BOT_TOKEN</span><span style="color:#24292E;"> = 1234567890:ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890</span></span></code></pre></div><p>转到 <a href="https://developer.kookapp.cn" target="_blank" rel="noreferrer">Kook 开发者中心</a>，左上角新建应用。</p><p>获取，填入您的 Kook 机器人 Token 即可。</p><h2 id="🍤-配置openai端点" tabindex="-1">🍤 配置Openai端点 <a class="header-anchor" href="#🍤-配置openai端点" aria-label="Permalink to &quot;🍤 配置Openai端点&quot;">​</a></h2><div class="language-ini vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">OPENAI_API_KEY</span><span style="color:#E1E4E8;"> = sk-xxx</span></span>
<span class="line"><span style="color:#F97583;">OPENAI_API_MODEL</span><span style="color:#E1E4E8;"> = gpt-3.5-turbo-0613</span></span>
<span class="line"><span style="color:#F97583;">OPENAI_API_ENDPOINT</span><span style="color:#E1E4E8;"> = https://api.openai.com/v1/chat/completions</span></span>
<span class="line"><span style="color:#F97583;">OPENAI_API_ORG_ID</span><span style="color:#E1E4E8;"> = org-xxx</span></span>
<span class="line"><span style="color:#F97583;">OPENAI_API_PROXY</span><span style="color:#E1E4E8;"> = socks5://127.0.0.1:7890</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">OPENAI_API_KEY</span><span style="color:#24292E;"> = sk-xxx</span></span>
<span class="line"><span style="color:#D73A49;">OPENAI_API_MODEL</span><span style="color:#24292E;"> = gpt-3.5-turbo-0613</span></span>
<span class="line"><span style="color:#D73A49;">OPENAI_API_ENDPOINT</span><span style="color:#24292E;"> = https://api.openai.com/v1/chat/completions</span></span>
<span class="line"><span style="color:#D73A49;">OPENAI_API_ORG_ID</span><span style="color:#24292E;"> = org-xxx</span></span>
<span class="line"><span style="color:#D73A49;">OPENAI_API_PROXY</span><span style="color:#24292E;"> = socks5://127.0.0.1:7890</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">提示</p><p>请确保您的 Openai API Endpoint 是完整的。</p></div><p>支持除 <code>0314</code> 系列的所有 Openai 模型列表请参考 <a href="https://beta.openai.com/docs/api-reference/" target="_blank" rel="noreferrer">Openai API</a>。</p><p>支持 <code>FunctionCall</code> 和 <code>ToolCall</code> 两种模式。</p><p>用户可以在 <a href="https://beta.openai.com/" target="_blank" rel="noreferrer">Openai</a> 申请 API Key。</p><p>用户数据和使用记录在 Mongodb 数据库中。</p><h3 id="🍟-非官方后端" tabindex="-1">🍟 非官方后端 <a class="header-anchor" href="#🍟-非官方后端" aria-label="Permalink to &quot;🍟 非官方后端&quot;">​</a></h3><p>如果你使用 <a href="https://github.com/songquanpeng/one-api" target="_blank" rel="noreferrer">One-API</a> 作为分流器并使用了不支持 functions 的模型，那么你可能无法使用一些基于 Func Calling 的功能。</p><p>如果你在使用 Azure ，请确认你使用的版本支持 functions。</p><p>本程序可以在不能使用<code>functions</code>的情况下运行单点回复， 但是其发送请求时，会带有 <code>functions: Optional[List[Function]]</code> <code>function_call: Optional[str]</code> 参数。</p>`,115),e=[o];function t(c,r,i,E,y,d){return a(),n("div",null,e)}const u=s(p,[["render",t]]);export{F as __pageData,u as default};
